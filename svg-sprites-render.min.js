(function(){var e=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++){if(t in this&&this[t]===e)return t}return-1};if(!window){throw new Error("For web browser only!!")}window.svgSprites=function(){var t,r,n,o,i,s,u,c;c={};n=[];u=this;s=function(e){var t,r,n,o,i,s,u,c,l;if(!e){throw new Error("Request Options is required")}s=e.url;n=e.async||true;u=e.user||"";o=e.password||"";i=e.timeout||0;if(!s){throw new Error("Request URL is required")}c=e.success;r=e.error;t=e.complete;l=new XMLHttpRequest;l.timeout=i;l.ontimeout=function(){return console.error("The request for "+s+" timed out.")};l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE){if(l.status===200){if(typeof c==="function"){c(l.response,l.status)}}else{if(typeof r==="function"){r(l.response,l.status)}}if(typeof t==="function"){t(l.response,l.status)}}};l.open("GET",s,n,u,o);l.setRequestHeader("Accept","text/xml");return l.send()};o=function(e){var t;t=n.indexOf(e);if(t>-1){n.splice(t,1)}};t=function(t,r){var n,o,i,s,u,l,f,a,d;i=document.createElement("div");i.innerHTML=t;a=i.querySelectorAll("[id]");c[r]={};for(s=0,u=a.length;s<u;s++){f=a[s];try{d=f.getAttribute("viewBox");if(!d){continue}if(l=f.id,e.call(c[r],l)<0){c[r][f.id]={children:function(){var e,t,r,o;r=f.childNodes;o=[];for(e=0,t=r.length;e<t;e++){n=r[e];if(n.nodeType===1){o.push(n)}}return o}(),view:d}}else{throw new Error("SVG ID is duplicated!!")}}catch(p){o=p;console.error(o)}}};r=function(e){var t,r,n;t=e&&typeof e==="object"&&e!==null;r=e.nodeType===1&&typeof e.nodeName==="string";n=t&&r;return n};i=function(e){var t,n,o,i,s,u,l,f,a,d,p,h,w;if(!e||!r(e)){e=document}if(e.nodeName.toUpperCase()==="SVG"&&e.getAttribute("svg-sprite")){p=[e]}else{p=e.querySelectorAll("svg[svg-sprite]")}for(i=0,l=p.length;i<l;i++){d=p[i];h=d.getAttribute("svg-sprite");if(!h){continue}w=h.split(":");if(w.length<2){continue}n=w[0];s=w[1];o=c[n];while(d.firstChild){d.removeChild(d.firstChild)}if(s&&o&&o.hasOwnProperty(s)){a=o[s].children;for(u=0,f=a.length;u<f;u++){t=a[u];d.appendChild(t.cloneNode(true))}d.setAttribute("viewBox",o[s].view)}else{console.error("SVG Sprite '"+h+"' not found:");console.log(n,s);console.log(c,o)}}};this.load=function(e,r){if(!r){r=e.replace(/^.*[\\\/]/,"")}n.push(e);console.log("SVG Sprites load "+e+" ["+r+"]");s({type:"GET",url:e,success:function(n){t(n,r);return o(e)},error:function(t,r){console.error("Ajax error! "+r,t);o(e)}})};this.render=function(e,t){var r;if(!t){t=3e4}t=(new Date).getTime()+t;r=setInterval(function(){var o;try{if(n.length<=0){clearInterval(r);i(e)}if((new Date).getTime()>t){clearInterval(r);throw new Error("SVG Sprites render timeout!!")}}catch(s){o=s;return console.error(o)}},100)};return this}}).call(this);